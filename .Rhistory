x = "Standardised Mean Difference (Positive Values Favour Self-Talk)",
# summary measure
y = "Sample Size (n)",
fill = "",
title = "Examining the effects of a single new trial varying the true effect size and sample size",
subtitle = "Prior and posterior distributions for pooled estimates, and mean and 95% quantile interval for posterior (text label)"
) +
guides(color = "none") +
scale_x_continuous(limits = c(-0.55, 1.1),
breaks = c(-0.5, 0, 0.5, 1)) +
theme_classic() +
theme(
legend.position = "bottom",
panel.border = element_rect(fill = NA),
plot.subtitle = element_text(size = 6)
)
posterior_update_new_study
additional_study_sims_summary <- additional_study_sims |>
group_by(participant_n, effect_size) |>
slice(1) |>
ungroup()
# Plot showing updating of posterior estimate from a single new study
posterior_update_new_study <- additional_study_sims |>
mutate(effect_lab = "Effect Size") |>
ggplot(aes(x = b_Intercept, y = factor(participant_n),
color = label, fill = label)) +
# Add reference line at zero
geom_vline(xintercept = 0, linetype = 2) +
# Add densities
stat_slab(alpha=0.6, linewidth=0) +
# Add text and labels
geom_text(
data = mutate_if(additional_study_sims_summary,
is.numeric, round, 2),
aes(
label = glue::glue("{percentage_in_rope$ROPE_percentage}%"),
# y = factor(participant_n),
x = 1.1
# group = b_cond_time
),
hjust = "inward",
size = 3,
color = "black"
) +
ggh4x::facet_nested(. ~ effect_lab + effect_size) +
scale_y_discrete(expand = c(0, 0)) +
scale_color_manual(values = c("#009E73", "#E69F00")) +
scale_fill_manual(values = c("#009E73", "#E69F00")) +
labs(
x = "Standardised Mean Difference (Positive Values Favour Self-Talk)",
# summary measure
y = "Sample Size (n)",
fill = "",
title = "Examining the effects of a single new trial varying the true effect size and sample size",
subtitle = "Prior and posterior distributions for pooled estimates, and mean and 95% quantile interval for posterior (text label)"
) +
guides(color = "none") +
scale_x_continuous(limits = c(-0.55, 1.1),
breaks = c(-0.5, 0, 0.5, 1)) +
theme_classic() +
theme(
legend.position = "bottom",
panel.border = element_rect(fill = NA),
plot.subtitle = element_text(size = 6)
)
posterior_update_new_study
mutate_if(additional_study_sims_summary,
is.numeric, round, 2)
View(additional_study_sims_summary)
View(additional_study_sims_summary)
additional_study_sims_summary <- additional_study_sims |>
janitor::clean_names()
View(additional_study_sims_summary)
additional_study_sims_summary <- additional_study_sims |>
select(participant_n, effect_size, percentage_in_rope)
View(additional_study_sims_summary)
additional_study_sims_summary <- additional_study_sims |>
select(participant_n, effect_size, percentage_in_rope$ROPE_percentage)
additional_study_sims_summary <- additional_study_sims |>
select(participant_n, effect_size, yi, vi, 9)
additional_study_sims_summary <- additional_study_sims |>
select( 9)
View(additional_study_sims)
targets::tar_make(garbage_collection = TRUE)
targets::tar_load(additional_study_sims)
additional_study_sims_summary <- additional_study_sims |>
group_by(participant_n, effect_size) |>
slice(1)
# Plot showing updating of posterior estimate from a single new study
posterior_update_new_study <- additional_study_sims |>
mutate(effect_lab = "Effect Size") |>
ggplot(aes(x = b_Intercept, y = factor(participant_n),
color = label, fill = label)) +
# Add reference line at zero
geom_vline(xintercept = 0, linetype = 2) +
# Add densities
stat_slab(alpha=0.6, linewidth=0) +
# Add text and labels
geom_text(
data = mutate_if(additional_study_sims_summary,
is.numeric, round, 2),
aes(
label = glue::glue("{percentage_in_rope}%"),
# y = factor(participant_n),
x = 1.1
# group = b_cond_time
),
hjust = "inward",
size = 3,
color = "black"
) +
ggh4x::facet_nested(. ~ effect_lab + effect_size) +
scale_y_discrete(expand = c(0, 0)) +
scale_color_manual(values = c("#009E73", "#E69F00")) +
scale_fill_manual(values = c("#009E73", "#E69F00")) +
labs(
x = "Standardised Mean Difference (Positive Values Favour Self-Talk)",
# summary measure
y = "Sample Size (n)",
fill = "",
title = "Examining the effects of a single new trial varying the true effect size and sample size",
subtitle = "Prior and posterior distributions for pooled estimates, and mean and 95% quantile interval for posterior (text label)"
) +
guides(color = "none") +
scale_x_continuous(limits = c(-0.55, 1.1),
breaks = c(-0.5, 0, 0.5, 1)) +
theme_classic() +
theme(
legend.position = "bottom",
panel.border = element_rect(fill = NA),
plot.subtitle = element_text(size = 6)
)
posterior_update_new_study
targets::tar_load(main_model)
percentage_in_rope <- rope(main_model, ci = 1, range = c(0.38, 0.58))$ROPE_percentage
percentage_in_rope <- bayestestR::rope(main_model, ci = 1, range = c(0.38, 0.58))$ROPE_percentage
percentage_in_rope <- bayestestR::rope(main_model, ci = 1, range = c(0.38, 0.58))
View(percentage_in_rope)
percentage_in_rope <- bayestestR::rope(main_model, ci = 1, range = c(0.38, 0.58))[5]
percentage_in_rope <- bayestestR::rope(main_model, ci = 1, range = c(0.38, 0.58))[1,5]
targets::tar_make(garbage_collection = TRUE)
targets::tar_load(additional_study_sims)
additional_study_sims_summary <- additional_study_sims |>
group_by(participant_n, effect_size) |>
slice(1)
# Plot showing updating of posterior estimate from a single new study
posterior_update_new_study <- additional_study_sims |>
mutate(effect_lab = "Effect Size") |>
ggplot(aes(x = b_Intercept, y = factor(participant_n),
color = label, fill = label)) +
# Add reference line at zero
geom_vline(xintercept = 0, linetype = 2) +
# Add densities
stat_slab(alpha=0.6, linewidth=0) +
# Add text and labels
geom_text(
data = mutate_if(additional_study_sims_summary,
is.numeric, round, 2),
aes(
label = glue::glue("{percentage_in_rope}%"),
# y = factor(participant_n),
x = 1.1
# group = b_cond_time
),
hjust = "inward",
size = 3,
color = "black"
) +
ggh4x::facet_nested(. ~ effect_lab + effect_size) +
scale_y_discrete(expand = c(0, 0)) +
scale_color_manual(values = c("#009E73", "#E69F00")) +
scale_fill_manual(values = c("#009E73", "#E69F00")) +
labs(
x = "Standardised Mean Difference (Positive Values Favour Self-Talk)",
# summary measure
y = "Sample Size (n)",
fill = "",
title = "Examining the effects of a single new trial varying the true effect size and sample size",
subtitle = "Prior and posterior distributions for pooled estimates, and mean and 95% quantile interval for posterior (text label)"
) +
guides(color = "none") +
scale_x_continuous(limits = c(-0.55, 1.1),
breaks = c(-0.5, 0, 0.5, 1)) +
theme_classic() +
theme(
legend.position = "bottom",
panel.border = element_rect(fill = NA),
plot.subtitle = element_text(size = 6)
)
posterior_update_new_study
additional_study_sims_summary <- additional_study_sims |>
group_by(participant_n, effect_size) |>
slice(1) |>
mutate(effect_lab = "Effect Size")
# Plot showing updating of posterior estimate from a single new study
posterior_update_new_study <- additional_study_sims |>
mutate(effect_lab = "Effect Size") |>
ggplot(aes(x = b_Intercept, y = factor(participant_n),
color = label, fill = label)) +
# Add reference line at zero
geom_vline(xintercept = 0, linetype = 2) +
# Add densities
stat_slab(alpha=0.6, linewidth=0) +
# Add text and labels
geom_text(
data = mutate_if(additional_study_sims_summary,
is.numeric, round, 2),
aes(
label = glue::glue("{percentage_in_rope}%"),
# y = factor(participant_n),
x = 1.1
# group = b_cond_time
),
hjust = "inward",
size = 3,
color = "black"
) +
ggh4x::facet_nested(. ~ effect_lab + effect_size) +
scale_y_discrete(expand = c(0, 0)) +
scale_color_manual(values = c("#009E73", "#E69F00")) +
scale_fill_manual(values = c("#009E73", "#E69F00")) +
labs(
x = "Standardised Mean Difference (Positive Values Favour Self-Talk)",
# summary measure
y = "Sample Size (n)",
fill = "",
title = "Examining the effects of a single new trial varying the true effect size and sample size",
subtitle = "Prior and posterior distributions for pooled estimates, and mean and 95% quantile interval for posterior (text label)"
) +
guides(color = "none") +
scale_x_continuous(limits = c(-0.55, 1.1),
breaks = c(-0.5, 0, 0.5, 1)) +
theme_classic() +
theme(
legend.position = "bottom",
panel.border = element_rect(fill = NA),
plot.subtitle = element_text(size = 6)
)
posterior_update_new_study
# Plot showing updating of posterior estimate from a single new study
posterior_update_new_study <- additional_study_sims |>
mutate(effect_lab = "Effect Size") |>
ggplot(aes(x = b_Intercept, y = factor(participant_n),
color = label, fill = label)) +
# Add reference line at zero
geom_vline(xintercept = 0, linetype = 2) +
# Add densities
stat_slab(alpha=0.6, linewidth=0) +
# Add text and labels
geom_text(
data = mutate_if(additional_study_sims_summary,
is.numeric, round, 4),
aes(
label = glue::glue("{scales::percent(percentage_in_rope)}%"),
y = 0.5,
x = 1.1
# group = b_cond_time
),
hjust = "inward",
size = 3,
color = "black"
) +
ggh4x::facet_nested(. ~ effect_lab + effect_size) +
scale_y_discrete(expand = c(0, 0)) +
scale_color_manual(values = c("#009E73", "#E69F00")) +
scale_fill_manual(values = c("#009E73", "#E69F00")) +
labs(
x = "Standardised Mean Difference (Positive Values Favour Self-Talk)",
# summary measure
y = "Sample Size (n)",
fill = "",
title = "Examining the effects of a single new trial varying the true effect size and sample size",
subtitle = "Prior and posterior distributions for pooled estimates, and mean and 95% quantile interval for posterior (text label)"
) +
guides(color = "none") +
scale_x_continuous(limits = c(-0.55, 1.1),
breaks = c(-0.5, 0, 0.5, 1)) +
theme_classic() +
theme(
legend.position = "bottom",
panel.border = element_rect(fill = NA),
plot.subtitle = element_text(size = 6)
)
posterior_update_new_study
# Plot showing updating of posterior estimate from a single new study
posterior_update_new_study <- additional_study_sims |>
mutate(effect_lab = "Effect Size") |>
ggplot(aes(x = b_Intercept, y = factor(participant_n),
color = label, fill = label)) +
# Add reference line at zero
geom_vline(xintercept = 0, linetype = 2) +
# Add densities
stat_slab(alpha=0.6, linewidth=0) +
# Add text and labels
geom_text(
data = mutate_if(additional_study_sims_summary,
is.numeric, round, 4),
aes(
label = glue::glue("{scales::percent(percentage_in_rope)}%"),
y = factor(participant_n) + 0.5,
x = 1.1
# group = b_cond_time
),
hjust = "inward",
size = 3,
color = "black"
) +
ggh4x::facet_nested(. ~ effect_lab + effect_size) +
scale_y_discrete(expand = c(0, 0)) +
scale_color_manual(values = c("#009E73", "#E69F00")) +
scale_fill_manual(values = c("#009E73", "#E69F00")) +
labs(
x = "Standardised Mean Difference (Positive Values Favour Self-Talk)",
# summary measure
y = "Sample Size (n)",
fill = "",
title = "Examining the effects of a single new trial varying the true effect size and sample size",
subtitle = "Prior and posterior distributions for pooled estimates, and mean and 95% quantile interval for posterior (text label)"
) +
guides(color = "none") +
scale_x_continuous(limits = c(-0.55, 1.1),
breaks = c(-0.5, 0, 0.5, 1)) +
theme_classic() +
theme(
legend.position = "bottom",
panel.border = element_rect(fill = NA),
plot.subtitle = element_text(size = 6)
)
posterior_update_new_study
# Plot showing updating of posterior estimate from a single new study
posterior_update_new_study <- additional_study_sims |>
mutate(effect_lab = "Effect Size") |>
ggplot(aes(x = b_Intercept, y = factor(participant_n),
color = label, fill = label)) +
# Add reference line at zero
geom_vline(xintercept = 0, linetype = 2) +
# Add densities
stat_slab(alpha=0.6, linewidth=0) +
# Add text and labels
geom_text(
data = mutate_if(additional_study_sims_summary,
is.numeric, round, 4),
aes(
label = glue::glue("{scales::percent(percentage_in_rope)}%"),
x = 1.1
),
hjust = "inward",
size = 3,
color = "black",
position = position_nudge(y = 0.5)
) +
ggh4x::facet_nested(. ~ effect_lab + effect_size) +
scale_y_discrete(expand = c(0, 0)) +
scale_color_manual(values = c("#009E73", "#E69F00")) +
scale_fill_manual(values = c("#009E73", "#E69F00")) +
labs(
x = "Standardised Mean Difference (Positive Values Favour Self-Talk)",
# summary measure
y = "Sample Size (n)",
fill = "",
title = "Examining the effects of a single new trial varying the true effect size and sample size",
subtitle = "Prior and posterior distributions for pooled estimates, and mean and 95% quantile interval for posterior (text label)"
) +
guides(color = "none") +
scale_x_continuous(limits = c(-0.55, 1.1),
breaks = c(-0.5, 0, 0.5, 1)) +
theme_classic() +
theme(
legend.position = "bottom",
panel.border = element_rect(fill = NA),
plot.subtitle = element_text(size = 6)
)
posterior_update_new_study
# Plot showing updating of posterior estimate from a single new study
posterior_update_new_study <- additional_study_sims |>
mutate(effect_lab = "Effect Size") |>
ggplot(aes(x = b_Intercept, y = factor(participant_n),
color = label, fill = label)) +
# Add reference line at zero
geom_vline(xintercept = 0, linetype = 2) +
# Add densities
stat_slab(alpha=0.6, linewidth=0) +
# Add text and labels
geom_text(
data = mutate_if(additional_study_sims_summary,
is.numeric, round, 3),
aes(
label = glue::glue("{scales::percent(percentage_in_rope)}"),
x = 1.1
),
hjust = "inward",
size = 3,
color = "black",
position = position_nudge(y = 0.5)
) +
ggh4x::facet_nested(. ~ effect_lab + effect_size) +
scale_y_discrete(expand = c(0, 0)) +
scale_color_manual(values = c("#009E73", "#E69F00")) +
scale_fill_manual(values = c("#009E73", "#E69F00")) +
labs(
x = "Standardised Mean Difference (Positive Values Favour Self-Talk)",
# summary measure
y = "Sample Size (n)",
fill = "",
title = "Examining the effects of a single new trial varying the true effect size and sample size",
subtitle = "Prior and posterior distributions for pooled estimates, and mean and 95% quantile interval for posterior (text label)"
) +
guides(color = "none") +
scale_x_continuous(limits = c(-0.55, 1.1),
breaks = c(-0.5, 0, 0.5, 1)) +
theme_classic() +
theme(
legend.position = "bottom",
panel.border = element_rect(fill = NA),
plot.subtitle = element_text(size = 6)
)
posterior_update_new_study
# Plot showing updating of posterior estimate from a single new study
posterior_update_new_study <- additional_study_sims |>
mutate(effect_lab = "Effect Size") |>
ggplot(aes(x = b_Intercept, y = factor(participant_n),
color = label, fill = label)) +
# Add reference line at zero
geom_vline(xintercept = 0, linetype = 2) +
# Add densities
stat_slab(alpha=0.6, linewidth=0) +
# Add text and labels
geom_text(
data = mutate_if(additional_study_sims_summary,
is.numeric, round, 3),
aes(
label = glue::glue("{scales::percent(percentage_in_rope)}"),
x = 1.1
),
hjust = "inward",
size = 3,
color = "black",
position = position_nudge(y = 0.5)
) +
ggh4x::facet_nested(. ~ effect_lab + effect_size) +
scale_y_discrete(expand = c(0, 0)) +
scale_color_manual(values = c("#009E73", "#E69F00")) +
scale_fill_manual(values = c("#009E73", "#E69F00")) +
labs(
x = "Standardised Mean Difference (Positive Values Favour Self-Talk)",
# summary measure
y = "Sample Size (n)",
fill = "",
title = "Examining the effects of a single new trial varying the true effect size and sample size",
subtitle = "Prior and posterior distributions for pooled estimates, and mean and 95% quantile interval for posterior (text label)"
) +
guides(color = "none") +
scale_x_continuous(limits = c(-0.05, 1.1),
breaks = c(0, 0.5, 1)) +
theme_classic() +
theme(
legend.position = "bottom",
panel.border = element_rect(fill = NA),
plot.subtitle = element_text(size = 6)
)
posterior_update_new_study
# Plot showing updating of posterior estimate from a single new study
posterior_update_new_study <- additional_study_sims |>
mutate(effect_lab = "Effect Size") |>
ggplot(aes(x = b_Intercept, y = factor(participant_n),
color = label, fill = label)) +
# Add reference line at zero
geom_vline(xintercept = 0, linetype = 2) +
# Add densities
stat_slab(alpha=0.6, linewidth=0) +
# Add text and labels
geom_text(
data = mutate_if(additional_study_sims_summary,
is.numeric, round, 3),
aes(
label = glue::glue("{scales::percent(percentage_in_rope)}"),
x = 1.1
),
hjust = "inward",
size = 3,
color = "black",
position = position_nudge(y = 0.5)
) +
ggh4x::facet_nested(. ~ effect_lab + effect_size) +
scale_y_discrete(expand = c(0, 0)) +
scale_color_manual(values = c("#009E73", "#E69F00")) +
scale_fill_manual(values = c("#009E73", "#E69F00")) +
labs(
x = "Standardised Mean Difference (Positive Values Favour Self-Talk)",
# summary measure
y = "Sample Size (n)",
fill = "",
title = "Examining the effects of a single new trial varying the true effect size and sample size",
subtitle = "Prior and posterior distributions for pooled estimates and percentage of posterior distribution within 95% quantile interval of prior distribution (text label)"
) +
guides(color = "none") +
scale_x_continuous(limits = c(-0.05, 1.1),
breaks = c(0, 0.5, 1)) +
theme_classic() +
theme(
legend.position = "bottom",
panel.border = element_rect(fill = NA),
plot.subtitle = element_text(size = 6)
)
posterior_update_new_study
targets::tar_load(null_robma_model)
targets::tar_load(prior_robma_model)
RoBMA::interpret(null_robma_model)
RoBMA::interpret(prior_robma_model)
targets::tar_make(garbage_collection = TRUE)
targets::tar_make()
targets::tar_visnetwork()
